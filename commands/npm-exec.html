
<!DOCTYPE HTML>
<html lang="us-en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Npm Exec · NPM 英文文档</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="Run a command from a local or remote npm package">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-solarizedlight.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="npm-explain.html" />
    
    
    <link rel="prev" href="npm-edit.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://docs.khs1994.com" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" >
            
                <span>
            
                    
                    Commands
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="npm-access.html">
            
                <a href="npm-access.html">
            
                    
                    Npm Access
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="npm-adduser.html">
            
                <a href="npm-adduser.html">
            
                    
                    Npm Adduser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="npm-audit.html">
            
                <a href="npm-audit.html">
            
                    
                    Npm Audit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="npm-bin.html">
            
                <a href="npm-bin.html">
            
                    
                    Npm Bin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="npm-bugs.html">
            
                <a href="npm-bugs.html">
            
                    
                    Npm Bugs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6" data-path="npm-cache.html">
            
                <a href="npm-cache.html">
            
                    
                    Npm Cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7" data-path="npm-ci.html">
            
                <a href="npm-ci.html">
            
                    
                    Npm Ci
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8" data-path="npm-completion.html">
            
                <a href="npm-completion.html">
            
                    
                    Npm Completion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.9" data-path="npm-config.html">
            
                <a href="npm-config.html">
            
                    
                    Npm Config
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.10" data-path="npm-dedupe.html">
            
                <a href="npm-dedupe.html">
            
                    
                    Npm Dedupe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.11" data-path="npm-deprecate.html">
            
                <a href="npm-deprecate.html">
            
                    
                    Npm Deprecate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.12" data-path="npm-diff.html">
            
                <a href="npm-diff.html">
            
                    
                    Npm Diff
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.13" data-path="npm-dist-tag.html">
            
                <a href="npm-dist-tag.html">
            
                    
                    Npm Dist Tag
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.14" data-path="npm-docs.html">
            
                <a href="npm-docs.html">
            
                    
                    Npm Docs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.15" data-path="npm-doctor.html">
            
                <a href="npm-doctor.html">
            
                    
                    Npm Doctor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.16" data-path="npm-edit.html">
            
                <a href="npm-edit.html">
            
                    
                    Npm Edit
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.1.17" data-path="npm-exec.html">
            
                <a href="npm-exec.html">
            
                    
                    Npm Exec
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.18" data-path="npm-explain.html">
            
                <a href="npm-explain.html">
            
                    
                    Npm Explain
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.19" data-path="npm-explore.html">
            
                <a href="npm-explore.html">
            
                    
                    Npm Explore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.20" data-path="npm-find-dupes.html">
            
                <a href="npm-find-dupes.html">
            
                    
                    Npm Find Dupes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.21" data-path="npm-fund.html">
            
                <a href="npm-fund.html">
            
                    
                    Npm Fund
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.22" data-path="npm-help-search.html">
            
                <a href="npm-help-search.html">
            
                    
                    Npm Help Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.23" data-path="npm-help.html">
            
                <a href="npm-help.html">
            
                    
                    Npm Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.24" data-path="npm-hook.html">
            
                <a href="npm-hook.html">
            
                    
                    Npm Hook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.25" data-path="npm-init.html">
            
                <a href="npm-init.html">
            
                    
                    Npm Init
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.26" data-path="npm-install-ci-test.html">
            
                <a href="npm-install-ci-test.html">
            
                    
                    Npm Install Ci Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.27" data-path="npm-install-test.html">
            
                <a href="npm-install-test.html">
            
                    
                    Npm Install Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.28" data-path="npm-install.html">
            
                <a href="npm-install.html">
            
                    
                    Npm Install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.29" data-path="npm-link.html">
            
                <a href="npm-link.html">
            
                    
                    Npm Link
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.30" data-path="npm-logout.html">
            
                <a href="npm-logout.html">
            
                    
                    Npm Logout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.31" data-path="npm-ls.html">
            
                <a href="npm-ls.html">
            
                    
                    Npm Ls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.32" data-path="npm-org.html">
            
                <a href="npm-org.html">
            
                    
                    Npm Org
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.33" data-path="npm-outdated.html">
            
                <a href="npm-outdated.html">
            
                    
                    Npm Outdated
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.34" data-path="npm-owner.html">
            
                <a href="npm-owner.html">
            
                    
                    Npm Owner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.35" data-path="npm-pack.html">
            
                <a href="npm-pack.html">
            
                    
                    Npm Pack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.36" data-path="npm-ping.html">
            
                <a href="npm-ping.html">
            
                    
                    Npm Ping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.37" data-path="npm-prefix.html">
            
                <a href="npm-prefix.html">
            
                    
                    Npm Prefix
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.38" data-path="npm-profile.html">
            
                <a href="npm-profile.html">
            
                    
                    Npm Profile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.39" data-path="npm-prune.html">
            
                <a href="npm-prune.html">
            
                    
                    Npm Prune
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.40" data-path="npm-publish.html">
            
                <a href="npm-publish.html">
            
                    
                    Npm Publish
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.41" data-path="npm-rebuild.html">
            
                <a href="npm-rebuild.html">
            
                    
                    Npm Rebuild
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.42" data-path="npm-repo.html">
            
                <a href="npm-repo.html">
            
                    
                    Npm Repo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.43" data-path="npm-restart.html">
            
                <a href="npm-restart.html">
            
                    
                    Npm Restart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.44" data-path="npm-root.html">
            
                <a href="npm-root.html">
            
                    
                    Npm Root
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.45" data-path="npm-run-script.html">
            
                <a href="npm-run-script.html">
            
                    
                    Npm Run Script
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.46" data-path="npm-search.html">
            
                <a href="npm-search.html">
            
                    
                    Npm Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.47" data-path="npm-set-script.html">
            
                <a href="npm-set-script.html">
            
                    
                    Npm Set Script
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.48" data-path="npm-shrinkwrap.html">
            
                <a href="npm-shrinkwrap.html">
            
                    
                    Npm Shrinkwrap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.49" data-path="npm-star.html">
            
                <a href="npm-star.html">
            
                    
                    Npm Star
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.50" data-path="npm-stars.html">
            
                <a href="npm-stars.html">
            
                    
                    Npm Stars
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.51" data-path="npm-start.html">
            
                <a href="npm-start.html">
            
                    
                    Npm Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.52" data-path="npm-stop.html">
            
                <a href="npm-stop.html">
            
                    
                    Npm Stop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.53" data-path="npm-team.html">
            
                <a href="npm-team.html">
            
                    
                    Npm Team
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.54" data-path="npm-test.html">
            
                <a href="npm-test.html">
            
                    
                    Npm Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.55" data-path="npm-token.html">
            
                <a href="npm-token.html">
            
                    
                    Npm Token
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.56" data-path="npm-uninstall.html">
            
                <a href="npm-uninstall.html">
            
                    
                    Npm Uninstall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.57" data-path="npm-unpublish.html">
            
                <a href="npm-unpublish.html">
            
                    
                    Npm Unpublish
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.58" data-path="npm-unstar.html">
            
                <a href="npm-unstar.html">
            
                    
                    Npm Unstar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.59" data-path="npm-update.html">
            
                <a href="npm-update.html">
            
                    
                    Npm Update
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.60" data-path="npm-version.html">
            
                <a href="npm-version.html">
            
                    
                    Npm Version
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.61" data-path="npm-view.html">
            
                <a href="npm-view.html">
            
                    
                    Npm View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.62" data-path="npm-whoami.html">
            
                <a href="npm-whoami.html">
            
                    
                    Npm Whoami
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.63" data-path="npm.html">
            
                <a href="npm.html">
            
                    
                    Npm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.64" data-path="npx.html">
            
                <a href="npx.html">
            
                    
                    Npx
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Configuring Npm
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../configuring-npm/folders.html">
            
                <a href="../configuring-npm/folders.html">
            
                    
                    Folders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../configuring-npm/install.html">
            
                <a href="../configuring-npm/install.html">
            
                    
                    Install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../configuring-npm/npm-shrinkwrap-json.html">
            
                <a href="../configuring-npm/npm-shrinkwrap-json.html">
            
                    
                    npm-shrinkwrap.json
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../configuring-npm/npmrc.html">
            
                <a href="../configuring-npm/npmrc.html">
            
                    
                    Npmrc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../configuring-npm/package-json.html">
            
                <a href="../configuring-npm/package-json.html">
            
                    
                    package.json
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../configuring-npm/package-lock-json.html">
            
                <a href="../configuring-npm/package-lock-json.html">
            
                    
                    package-lock.json
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Using Npm
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../using-npm/config.html">
            
                <a href="../using-npm/config.html">
            
                    
                    Config
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../using-npm/developers.html">
            
                <a href="../using-npm/developers.html">
            
                    
                    Developers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../using-npm/orgs.html">
            
                <a href="../using-npm/orgs.html">
            
                    
                    Orgs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../using-npm/registry.html">
            
                <a href="../using-npm/registry.html">
            
                    
                    Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../using-npm/removal.html">
            
                <a href="../using-npm/removal.html">
            
                    
                    Removal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../using-npm/scope.html">
            
                <a href="../using-npm/scope.html">
            
                    
                    Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../using-npm/scripts.html">
            
                <a href="../using-npm/scripts.html">
            
                    
                    Scripts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../using-npm/workspaces.html">
            
                <a href="../using-npm/workspaces.html">
            
                    
                    Workspaces
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../">
            
                <a href="../">
            
                    
                    package.json
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Npm Exec</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="synopsis">Synopsis</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">npm</span> <span class="token builtin class-name">exec</span> -- <span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>args<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token function">npm</span> <span class="token builtin class-name">exec</span> --package<span class="token operator">=</span><span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token punctuation">]</span> -- <span class="token operator">&lt;</span>cmd<span class="token operator">&gt;</span> <span class="token punctuation">[</span>args<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token function">npm</span> <span class="token builtin class-name">exec</span> -c <span class="token string">&apos;&lt;cmd&gt; [args...]&apos;</span>
<span class="token function">npm</span> <span class="token builtin class-name">exec</span> --package<span class="token operator">=</span>foo -c <span class="token string">&apos;&lt;cmd&gt; [args...]&apos;</span>
<span class="token function">npm</span> <span class="token builtin class-name">exec</span> <span class="token punctuation">[</span>--ws<span class="token punctuation">]</span> <span class="token punctuation">[</span>-w <span class="token operator">&lt;</span>workspace-name<span class="token punctuation">]</span> <span class="token punctuation">[</span>args<span class="token punctuation">..</span>.<span class="token punctuation">]</span>

npx <span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>specifier<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>args<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
npx -p <span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>specifier<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>cmd<span class="token operator">&gt;</span> <span class="token punctuation">[</span>args<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
npx -c <span class="token string">&apos;&lt;cmd&gt; [args...]&apos;</span>
npx -p <span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>specifier<span class="token operator">&gt;</span><span class="token punctuation">]</span> -c <span class="token string">&apos;&lt;cmd&gt; [args...]&apos;</span>
Run without --call or positional args to <span class="token function">open</span> interactive subshell

alias: <span class="token function">npm</span> x, npx

common options:
--package<span class="token operator">=</span><span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span> <span class="token punctuation">(</span>may be specified multiple <span class="token builtin class-name">times</span><span class="token punctuation">)</span>
-p is a shorthand <span class="token keyword">for</span> --package only when using npx executable
-c <span class="token operator">&lt;</span>cmd<span class="token operator">&gt;</span> --call<span class="token operator">=</span><span class="token operator">&lt;</span>cmd<span class="token operator">&gt;</span> <span class="token punctuation">(</span>may not be mixed with positional arguments<span class="token punctuation">)</span>
</code></pre>
<h3 id="description">Description</h3>
<p>This command allows you to run an arbitrary command from an npm package
(either one installed locally, or fetched remotely), in a similar context
as running it via <code>npm run</code>.</p>
<p>Run without positional arguments or <code>--call</code>, this allows you to
interactively run commands in the same sort of shell environment that
<code>package.json</code> scripts are run.  Interactive mode is not supported in CI
environments when standard input is a TTY, to prevent hangs.</p>
<p>Whatever packages are specified by the <code>--package</code> option will be
provided in the <code>PATH</code> of the executed command, along with any locally
installed package executables.  The <code>--package</code> option may be
specified multiple times, to execute the supplied command in an environment
where all specified packages are available.</p>
<p>If any requested packages are not present in the local project
dependencies, then they are installed to a folder in the npm cache, which
is added to the <code>PATH</code> environment variable in the executed process.  A
prompt is printed (which can be suppressed by providing either <code>--yes</code> or
<code>--no</code>).</p>
<p>Package names provided without a specifier will be matched with whatever
version exists in the local project.  Package names with a specifier will
only be considered a match if they have the exact same name and version as
the local dependency.</p>
<p>If no <code>-c</code> or <code>--call</code> option is provided, then the positional arguments
are used to generate the command string.  If no <code>--package</code> options
are provided, then npm will attempt to determine the executable name from
the package specifier provided as the first positional argument according
to the following heuristic:</p>
<ul>
<li>If the package has a single entry in its <code>bin</code> field in <code>package.json</code>,
or if all entries are aliases of the same command, then that command
will be used.</li>
<li>If the package has multiple <code>bin</code> entries, and one of them matches the
unscoped portion of the <code>name</code> field, then that command will be used.</li>
<li>If this does not result in exactly one option (either because there are
no bin entries, or none of them match the <code>name</code> of the package), then
<code>npm exec</code> exits with an error.</li>
</ul>
<p>To run a binary <em>other than</em> the named binary, specify one or more
<code>--package</code> options, which will prevent npm from inferring the package from
the first command argument.</p>
<h3 id="npx-vs-npm-exec"><code>npx</code> vs <code>npm exec</code></h3>
<p>When run via the <code>npx</code> binary, all flags and options <em>must</em> be set prior to
any positional arguments.  When run via <code>npm exec</code>, a double-hyphen <code>--</code>
flag can be used to suppress npm&apos;s parsing of switches and options that
should be sent to the executed command.</p>
<p>For example:</p>
<pre class="language-"><code>$ npx foo@latest bar --package=@npmcli/foo
</code></pre><p>In this case, npm will resolve the <code>foo</code> package name, and run the
following command:</p>
<pre class="language-"><code>$ foo bar --package=@npmcli/foo
</code></pre><p>Since the <code>--package</code> option comes <em>after</em> the positional arguments, it is
treated as an argument to the executed command.</p>
<p>In contrast, due to npm&apos;s argument parsing logic, running this command is
different:</p>
<pre class="language-"><code>$ npm exec foo@latest bar --package=@npmcli/foo
</code></pre><p>In this case, npm will parse the <code>--package</code> option first, resolving the
<code>@npmcli/foo</code> package.  Then, it will execute the following command in that
context:</p>
<pre class="language-"><code>$ foo@latest bar
</code></pre><p>The double-hyphen character is recommended to explicitly tell npm to stop
parsing command line options and switches.  The following command would
thus be equivalent to the <code>npx</code> command above:</p>
<pre class="language-"><code>$ npm exec -- foo@latest bar --package=@npmcli/foo
</code></pre><h3 id="examples">Examples</h3>
<p>Run the version of <code>tap</code> in the local dependencies, with the provided
arguments:</p>
<pre class="language-"><code>$ npm exec -- tap --bail test/foo.js
$ npx tap --bail test/foo.js
</code></pre><p>Run a command <em>other than</em> the command whose name matches the package name
by specifying a <code>--package</code> option:</p>
<pre class="language-"><code>$ npm exec --package=foo -- bar --bar-argument
# ~ or ~
$ npx --package=foo bar --bar-argument
</code></pre><p>Run an arbitrary shell script, in the context of the current project:</p>
<pre class="language-"><code>$ npm x -c &apos;eslint &amp;&amp; say &quot;hooray, lint passed&quot;&apos;
$ npx -c &apos;eslint &amp;&amp; say &quot;hooray, lint passed&quot;&apos;
</code></pre><h3 id="workspaces-support">Workspaces support</h3>
<p>You may use the <code>workspace</code> or <code>workspaces</code> configs in order to run an
arbitrary command from an npm package (either one installed locally, or fetched
remotely) in the context of the specified workspaces.
If no positional argument or <code>--call</code> option is provided, it will open an
interactive subshell in the context of each of these configured workspaces one
at a time.</p>
<p>Given a project with configured workspaces, e.g:</p>
<pre class="language-"><code>.
+-- package.json
`-- packages
   +-- a
   |   `-- package.json
   +-- b
   |   `-- package.json
   `-- c
       `-- package.json
</code></pre><p>Assuming the workspace configuration is properly set up at the root level
<code>package.json</code> file. e.g:</p>
<pre class="language-"><code>{
    &quot;workspaces&quot;: [ &quot;./packages/*&quot; ]
}
</code></pre><p>You can execute an arbitrary command from a package in the context of each of
the configured workspaces when using the <code>workspaces</code> configuration options,
in this example we&apos;re using <strong>eslint</strong> to lint any js file found within each
workspace folder:</p>
<pre class="language-"><code>npm exec --ws -- eslint ./*.js
</code></pre><h4 id="filtering-workspaces">Filtering workspaces</h4>
<p>It&apos;s also possible to execute a command in a single workspace using the
<code>workspace</code> config along with a name or directory path:</p>
<pre class="language-"><code>npm exec --workspace=a -- eslint ./*.js
</code></pre><p>The <code>workspace</code> config can also be specified multiple times in order to run a
specific script in the context of multiple workspaces. When defining values for
the <code>workspace</code> config in the command line, it also possible to use <code>-w</code> as a
shorthand, e.g:</p>
<pre class="language-"><code>npm exec -w a -w b -- eslint ./*.js
</code></pre><p>This last command will run the <code>eslint</code> command in both <code>./packages/a</code> and
<code>./packages/b</code> folders.</p>
<h3 id="compatibility-with-older-npx-versions">Compatibility with Older npx Versions</h3>
<p>The <code>npx</code> binary was rewritten in npm v7.0.0, and the standalone <code>npx</code>
package deprecated at that time.  <code>npx</code> uses the <code>npm exec</code>
command instead of a separate argument parser and install process, with
some affordances to maintain backwards compatibility with the arguments it
accepted in previous versions.</p>
<p>This resulted in some shifts in its functionality:</p>
<ul>
<li>Any <code>npm</code> config value may be provided.</li>
<li>To prevent security and user-experience problems from mistyping package
names, <code>npx</code> prompts before installing anything.  Suppress this
prompt with the <code>-y</code> or <code>--yes</code> option.</li>
<li>The <code>--no-install</code> option is deprecated, and will be converted to <code>--no</code>.</li>
<li>Shell fallback functionality is removed, as it is not advisable.</li>
<li>The <code>-p</code> argument is a shorthand for <code>--parseable</code> in npm, but shorthand
for <code>--package</code> in npx.  This is maintained, but only for the <code>npx</code>
executable.</li>
<li>The <code>--ignore-existing</code> option is removed.  Locally installed bins are
always present in the executed process <code>PATH</code>.</li>
<li>The <code>--npm</code> option is removed.  <code>npx</code> will always use the <code>npm</code> it ships
with.</li>
<li>The <code>--node-arg</code> and <code>-n</code> options are removed.</li>
<li>The <code>--always-spawn</code> option is redundant, and thus removed.</li>
<li>The <code>--shell</code> option is replaced with <code>--script-shell</code>, but maintained
in the <code>npx</code> executable for backwards compatibility.</li>
</ul>
<h3 id="a-note-on-caching">A note on caching</h3>
<p>The npm cli utilizes its internal package cache when using the package
name specified.  You can use the following to change how and when the
cli uses this cache. See <a href="npm-cache"><code>npm cache</code></a> for more on
how the cache works.</p>
<h4 id="prefer-online">prefer-online</h4>
<p>Forces staleness checks for packages, making the cli look for updates
immediately even if the package is already in the cache.</p>
<h4 id="prefer-offline">prefer-offline</h4>
<p>Bypasses staleness checks for packages.  Missing data will still be
requested from the server. To force full offline mode, use <code>offline</code>.</p>
<h4 id="offline">offline</h4>
<p>Forces full offline mode. Any packages not locally cached will result in
an error.</p>
<h4 id="workspace">workspace</h4>
<ul>
<li>Alias: <code>-w</code></li>
<li>Type: Array</li>
<li>Default: <code>[]</code></li>
</ul>
<p>Enable running scripts in the context of workspaces while also filtering by
the provided names or paths provided.</p>
<p>Valid values for the <code>workspace</code> config are either:</p>
<ul>
<li>Workspace names</li>
<li>Path to a workspace directory</li>
<li>Path to a parent workspace directory (will result to selecting all of the
children workspaces)</li>
</ul>
<h4 id="workspaces">workspaces</h4>
<ul>
<li>Alias: <code>--ws</code></li>
<li>Type: Boolean</li>
<li>Default: <code>false</code></li>
</ul>
<p>Run scripts in the context of all configured workspaces for the current
project.</p>
<h3 id="see-also">See Also</h3>
<ul>
<li><a href="npm-run-script">npm run-script</a></li>
<li><a href="../using-npm/scripts">npm scripts</a></li>
<li><a href="npm-test">npm test</a></li>
<li><a href="npm-start">npm start</a></li>
<li><a href="npm-restart">npm restart</a></li>
<li><a href="npm-stop">npm stop</a></li>
<li><a href="npm-config">npm config</a></li>
<li><a href="../using-npm/workspaces">npm workspaces</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="npm-edit.html" class="navigation navigation-prev " aria-label="Previous page: Npm Edit">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="npm-explain.html" class="navigation navigation-next " aria-label="Next page: Npm Explain">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Npm Exec","section":1,"description":"Run a command from a local or remote npm package","level":"1.1.17","depth":2,"next":{"title":"Npm Explain","level":"1.1.18","depth":2,"path":"commands/npm-explain.md","ref":"commands/npm-explain.md","articles":[]},"previous":{"title":"Npm Edit","level":"1.1.16","depth":2,"path":"commands/npm-edit.md","ref":"commands/npm-edit.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-highlight","-livereload","prism"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-solarizedlight.css"]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"NPM 英文文档","language":"us-en","links":{"sidebar":{"Home":"https://docs.khs1994.com"}},"gitbook":"*"},"file":{"path":"commands/npm-exec.md","mtime":"2021-05-14T01:08:50.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-05-14T01:09:26.705Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

